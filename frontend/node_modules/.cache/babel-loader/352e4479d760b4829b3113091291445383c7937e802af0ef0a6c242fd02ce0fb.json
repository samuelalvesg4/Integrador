{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\sasuk\\\\OneDrive\\\\Documentos\\\\estudo\\\\Integrador\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\n// Exemplo de ProtectedRoute.jsx\nimport { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProtectedRoute({\n  children,\n  role\n}) {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [hasChecked, setHasChecked] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const userString = localStorage.getItem(\"user\");\n    if (!token || !userString) {\n      setIsAuthenticated(false);\n    } else {\n      const user = JSON.parse(userString);\n      if (role && user.role !== role) {\n        setIsAuthenticated(false);\n      } else {\n        setIsAuthenticated(true);\n      }\n    }\n    setHasChecked(true);\n  }, [role]);\n  if (!hasChecked) {\n    return null; // ou um spinner de carregamento\n  }\n  if (isAuthenticated) {\n    return children;\n  } else {\n    // Redireciona com base na verificação final\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user && role && user.role !== role) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }, this);\n  }\n}\n_s(ProtectedRoute, \"l5e7ppbmlBTrZymPpymKX2Ui1kQ=\");\n_c = ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["useEffect","useState","Navigate","jsxDEV","_jsxDEV","ProtectedRoute","children","role","_s","isAuthenticated","setIsAuthenticated","hasChecked","setHasChecked","token","localStorage","getItem","userString","user","JSON","parse","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Users/sasuk/OneDrive/Documentos/estudo/Integrador/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["// Exemplo de ProtectedRoute.jsx\r\nimport { useEffect, useState } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nexport default function ProtectedRoute({ children, role }) {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [hasChecked, setHasChecked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const userString = localStorage.getItem(\"user\");\r\n\r\n    if (!token || !userString) {\r\n      setIsAuthenticated(false);\r\n    } else {\r\n      const user = JSON.parse(userString);\r\n      if (role && user.role !== role) {\r\n        setIsAuthenticated(false);\r\n      } else {\r\n        setIsAuthenticated(true);\r\n      }\r\n    }\r\n    setHasChecked(true);\r\n  }, [role]);\r\n\r\n  if (!hasChecked) {\r\n    return null; // ou um spinner de carregamento\r\n  }\r\n\r\n  if (isAuthenticated) {\r\n    return children;\r\n  } else {\r\n    // Redireciona com base na verificação final\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (user && role && user.role !== role) {\r\n      return <Navigate to=\"/\" replace />;\r\n    }\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n}"],"mappings":";;AAAA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,eAAe,SAASC,cAAcA,CAAC;EAAEC,QAAQ;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EACzD,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAEnDD,SAAS,CAAC,MAAM;IACd,MAAMa,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,UAAU,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAE/C,IAAI,CAACF,KAAK,IAAI,CAACG,UAAU,EAAE;MACzBN,kBAAkB,CAAC,KAAK,CAAC;IAC3B,CAAC,MAAM;MACL,MAAMO,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,UAAU,CAAC;MACnC,IAAIT,IAAI,IAAIU,IAAI,CAACV,IAAI,KAAKA,IAAI,EAAE;QAC9BG,kBAAkB,CAAC,KAAK,CAAC;MAC3B,CAAC,MAAM;QACLA,kBAAkB,CAAC,IAAI,CAAC;MAC1B;IACF;IACAE,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC,EAAE,CAACL,IAAI,CAAC,CAAC;EAEV,IAAI,CAACI,UAAU,EAAE;IACf,OAAO,IAAI,CAAC,CAAC;EACf;EAEA,IAAIF,eAAe,EAAE;IACnB,OAAOH,QAAQ;EACjB,CAAC,MAAM;IACL;IACA,MAAMW,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrD,IAAIE,IAAI,IAAIV,IAAI,IAAIU,IAAI,CAACV,IAAI,KAAKA,IAAI,EAAE;MACtC,oBAAOH,OAAA,CAACF,QAAQ;QAACkB,EAAE,EAAC,GAAG;QAACC,OAAO;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACpC;IACA,oBAAOrB,OAAA,CAACF,QAAQ;MAACkB,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzC;AACF;AAACjB,EAAA,CAnCuBH,cAAc;AAAAqB,EAAA,GAAdrB,cAAc;AAAA,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}