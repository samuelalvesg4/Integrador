{"ast":null,"code":"const API = process.env.REACT_APP_API || 'http://localhost:4000/api';\nexport async function request(path, options = {}) {\n  const token = localStorage.getItem('token');\n  const headers = {\n    ...(options.headers || {})\n  };\n  if (options.body && !(options.body instanceof FormData)) {\n    headers['Content-Type'] = 'application/json';\n  }\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const res = await fetch(`${API}${path}`, {\n    ...options,\n    headers\n  });\n  const text = await res.text();\n  let data;\n  try {\n    data = text ? JSON.parse(text) : null;\n  } catch {\n    data = text;\n  }\n  if (!res.ok) {\n    const errorBody = data || text;\n    const err = new Error((errorBody === null || errorBody === void 0 ? void 0 : errorBody.message) || (errorBody === null || errorBody === void 0 ? void 0 : errorBody.error) || res.statusText || 'Erro na requisição');\n    err.status = res.status;\n    err.body = errorBody;\n    throw err;\n  }\n  return data;\n}\nexport async function login(email, password) {\n  return request('/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n}\nexport async function register(name, email, password, role) {\n  return request('/register', {\n    method: 'POST',\n    body: JSON.stringify({\n      name,\n      email,\n      password,\n      role\n    })\n  });\n}\nexport async function registerProduct(name, price, description, stock, images) {\n  return request('/products', {\n    method: 'POST',\n    body: JSON.stringify({\n      name,\n      price,\n      description,\n      stock,\n      images\n    })\n  });\n}\nexport async function uploadImages(files) {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('Token não fornecido.');\n  }\n  const formData = new FormData();\n  files.forEach(file => {\n    formData.append('images', file);\n  });\n  return request('/upload', {\n    method: 'POST',\n    body: formData\n  });\n}\nexport async function getSellerProducts() {\n  return request('/sellers/products', {\n    method: 'GET'\n  });\n}\nexport async function getSellerSales() {\n  return request('/sales', {\n    method: 'GET'\n  });\n}","map":{"version":3,"names":["API","process","env","REACT_APP_API","request","path","options","token","localStorage","getItem","headers","body","FormData","res","fetch","text","data","JSON","parse","ok","errorBody","err","Error","message","error","statusText","status","login","email","password","method","stringify","register","name","role","registerProduct","price","description","stock","images","uploadImages","files","formData","forEach","file","append","getSellerProducts","getSellerSales"],"sources":["C:/Users/Samuel Alves/Desktop/e-commerce/frontend/src/services/api.js"],"sourcesContent":["const API = process.env.REACT_APP_API || 'http://localhost:4000/api';\r\n\r\nexport async function request(path, options = {}) {\r\n  const token = localStorage.getItem('token');\r\n  const headers = { ...(options.headers || {}) };\r\n\r\n  if (options.body && !(options.body instanceof FormData)) {\r\n    headers['Content-Type'] = 'application/json';\r\n  }\r\n\r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  const res = await fetch(`${API}${path}`, { ...options, headers });\r\n  \r\n  const text = await res.text();\r\n  let data;\r\n  try { \r\n    data = text ? JSON.parse(text) : null; \r\n  } catch { \r\n    data = text; \r\n  }\r\n\r\n  if (!res.ok) {\r\n    const errorBody = data || text;\r\n    const err = new Error(errorBody?.message || errorBody?.error || res.statusText || 'Erro na requisição');\r\n    err.status = res.status;\r\n    err.body = errorBody;\r\n    throw err;\r\n  }\r\n  return data;\r\n}\r\n\r\nexport async function login(email, password) {\r\n  return request('/login', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n}\r\n\r\nexport async function register(name, email, password, role) {\r\n  return request('/register', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ name, email, password, role }),\r\n  });\r\n}\r\n\r\nexport async function registerProduct(name, price, description, stock, images) {\r\n  return request('/products', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ name, price, description, stock, images }),\r\n  });\r\n}\r\n\r\nexport async function uploadImages(files) {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) {\r\n    throw new Error('Token não fornecido.');\r\n  }\r\n  \r\n  const formData = new FormData();\r\n  files.forEach(file => {\r\n    formData.append('images', file);\r\n  });\r\n\r\n  return request('/upload', {\r\n    method: 'POST',\r\n    body: formData,\r\n  });\r\n}\r\n\r\nexport async function getSellerProducts() {\r\n  return request('/sellers/products', {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\nexport async function getSellerSales() {\r\n  return request('/sales', {\r\n    method: 'GET',\r\n  });\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}