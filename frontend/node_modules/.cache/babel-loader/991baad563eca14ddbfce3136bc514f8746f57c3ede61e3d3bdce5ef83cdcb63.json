{"ast":null,"code":"// frontend/src/components/ProductCard.jsx\nimport React,{useState}from'react';import{Link}from'react-router-dom';import{useCart}from'../context/CartContext';// Adicione este CSS no final do seu index.css ou crie um ProductCard.css\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const notificationStyles=\"\\n.product-card-notification {\\n    position: absolute;\\n    bottom: 1rem;\\n    left: 50%;\\n    transform: translateX(-50%);\\n    background-color: #28a745; /* Verde sucesso */\\n    color: white;\\n    padding: 0.5rem 1rem;\\n    border-radius: 9999px; /* Formato de p\\xEDlula */\\n    font-size: 0.875rem;\\n    font-weight: bold;\\n    opacity: 0;\\n    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;\\n    pointer-events: none; /* N\\xE3o interfere com cliques */\\n}\\n\\n.product-card-notification.show {\\n    opacity: 1;\\n    transform: translateX(-50%) translateY(-10px);\\n}\\n\";export default function ProductCard(_ref){let{product}=_ref;const{addToCart}=useCart();// --- NOVO ESTADO PARA CONTROLAR A NOTIFICAÇÃO ---\nconst[showNotification,setShowNotification]=useState(false);const handleAddToCart=()=>{addToCart(product);// Mostra a notificação e a esconde após 2 segundos\nsetShowNotification(true);setTimeout(()=>{setShowNotification(false);},2000);};const getTransformedUrl=url=>{if(!url)return null;const transformation='h_200,c_scale';const parts=url.split('/upload/');return\"\".concat(parts[0],\"/upload/\").concat(transformation,\"/\").concat(parts[1]);};const imageUrl=product.images&&product.images.length>0?getTransformedUrl(product.images[0].url):null;const formattedPrice=new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(product.priceCents/100||0);// Use priceCents\n// Verifica se o produto está sem estoque\nconst isOutOfStock=product.stock<=0;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"style\",{children:notificationStyles}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden transform hover:scale-105 transition duration-300 relative\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.id),children:imageUrl?/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:product.name,className:\"w-full h-48 object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 bg-gray-200 flex items-center justify-center text-gray-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Sem Imagem\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold truncate\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1 font-bold\",children:formattedPrice}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mt-4\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{// A função agora é a nossa nova 'handleAddToCart'\nonClick:handleAddToCart// --- MUDANÇA PRINCIPAL: DESABILITA O BOTÃO SE ESTIVER FORA DE ESTOQUE ---\n,disabled:isOutOfStock// Muda a cor e o texto do botão se estiver esgotado\n,className:\"text-white text-sm px-3 py-1 rounded transition \".concat(isOutOfStock?'bg-gray-400 cursor-not-allowed':'bg-green-600 hover:bg-green-700'),children:isOutOfStock?'Esgotado':'Adicionar ao Carrinho'})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-card-notification \".concat(showNotification?'show':''),children:\"Adicionado! \\u2714\\uFE0F\"})]})]});}","map":{"version":3,"names":["React","useState","Link","useCart","jsx","_jsx","jsxs","_jsxs","notificationStyles","ProductCard","_ref","product","addToCart","showNotification","setShowNotification","handleAddToCart","setTimeout","getTransformedUrl","url","transformation","parts","split","concat","imageUrl","images","length","formattedPrice","Intl","NumberFormat","style","currency","format","priceCents","isOutOfStock","stock","children","className","to","id","src","alt","name","onClick","disabled"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/components/ProductCard.jsx"],"sourcesContent":["// frontend/src/components/ProductCard.jsx\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCart } from '../context/CartContext';\n\n// Adicione este CSS no final do seu index.css ou crie um ProductCard.css\nconst notificationStyles = `\n.product-card-notification {\n    position: absolute;\n    bottom: 1rem;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: #28a745; /* Verde sucesso */\n    color: white;\n    padding: 0.5rem 1rem;\n    border-radius: 9999px; /* Formato de pílula */\n    font-size: 0.875rem;\n    font-weight: bold;\n    opacity: 0;\n    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;\n    pointer-events: none; /* Não interfere com cliques */\n}\n\n.product-card-notification.show {\n    opacity: 1;\n    transform: translateX(-50%) translateY(-10px);\n}\n`;\n\nexport default function ProductCard({ product }) {\n    const { addToCart } = useCart();\n    \n    // --- NOVO ESTADO PARA CONTROLAR A NOTIFICAÇÃO ---\n    const [showNotification, setShowNotification] = useState(false);\n\n    const handleAddToCart = () => {\n        addToCart(product);\n\n        // Mostra a notificação e a esconde após 2 segundos\n        setShowNotification(true);\n        setTimeout(() => {\n            setShowNotification(false);\n        }, 2000);\n    };\n\n    const getTransformedUrl = (url) => {\n        if (!url) return null;\n        const transformation = 'h_200,c_scale';\n        const parts = url.split('/upload/');\n        return `${parts[0]}/upload/${transformation}/${parts[1]}`;\n    };\n\n    const imageUrl = (product.images && product.images.length > 0)\n        ? getTransformedUrl(product.images[0].url)\n        : null;\n\n    const formattedPrice = new Intl.NumberFormat('pt-BR', {\n        style: 'currency',\n        currency: 'BRL',\n    }).format(product.priceCents / 100 || 0); // Use priceCents\n\n    // Verifica se o produto está sem estoque\n    const isOutOfStock = product.stock <= 0;\n\n    return (\n        <div>\n            {/* Adicionando a tag de estilo diretamente para simplificar */}\n            <style>{notificationStyles}</style>\n\n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden transform hover:scale-105 transition duration-300 relative\">\n                <Link to={`/product/${product.id}`}>\n                    {imageUrl ? (\n                        <img src={imageUrl} alt={product.name} className=\"w-full h-48 object-cover\" />\n                    ) : (\n                        <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center text-gray-500\">\n                            <span className=\"text-sm\">Sem Imagem</span>\n                        </div>\n                    )}\n                </Link>\n                \n                <div className=\"p-4\">\n                    <h3 className=\"text-lg font-semibold truncate\">{product.name}</h3>\n                    <p className=\"text-gray-600 mt-1 font-bold\">{formattedPrice}</p>\n                    \n                    <div className=\"flex justify-between items-center mt-4\">\n                        <div>\n                            <button\n                                // A função agora é a nossa nova 'handleAddToCart'\n                                onClick={handleAddToCart}\n                                // --- MUDANÇA PRINCIPAL: DESABILITA O BOTÃO SE ESTIVER FORA DE ESTOQUE ---\n                                disabled={isOutOfStock}\n                                // Muda a cor e o texto do botão se estiver esgotado\n                                className={`text-white text-sm px-3 py-1 rounded transition ${\n                                    isOutOfStock \n                                        ? 'bg-gray-400 cursor-not-allowed' \n                                        : 'bg-green-600 hover:bg-green-700'\n                                }`}\n                            >\n                                {isOutOfStock ? 'Esgotado' : 'Adicionar ao Carrinho'}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                {/* --- A MÁGICA DA NOTIFICAÇÃO --- */}\n                <div className={`product-card-notification ${showNotification ? 'show' : ''}`}>\n                    Adicionado! ✔️\n                </div>\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}