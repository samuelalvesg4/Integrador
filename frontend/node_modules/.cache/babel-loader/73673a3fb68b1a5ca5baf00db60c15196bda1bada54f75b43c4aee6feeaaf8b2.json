{"ast":null,"code":"// frontend/src/hooks/useUser.js\nimport{useState,useEffect}from'react';export default function useUser(){const[user,setUser]=useState(null);useEffect(()=>{// Função que lê o localStorage e atualiza o estado\nconst checkUser=()=>{const storedUser=localStorage.getItem('user');if(storedUser){setUser(JSON.parse(storedUser));}else{setUser(null);}};// Roda a função uma vez quando o componente é montado\ncheckUser();// Adiciona um \"ouvinte\" que recarrega os dados do usuário\n// sempre que um evento 'userChanged' for disparado (no login/logout)\nwindow.addEventListener('userChanged',checkUser);// Função de \"limpeza\": remove o ouvinte para evitar problemas de memória\nreturn()=>{window.removeEventListener('userChanged',checkUser);};},[]);return user;}","map":{"version":3,"names":["useState","useEffect","useUser","user","setUser","checkUser","storedUser","localStorage","getItem","JSON","parse","window","addEventListener","removeEventListener"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/hooks/useUser.js"],"sourcesContent":["// frontend/src/hooks/useUser.js\nimport { useState, useEffect } from 'react';\n\nexport default function useUser() {\n    const [user, setUser] = useState(null);\n\n    useEffect(() => {\n        // Função que lê o localStorage e atualiza o estado\n        const checkUser = () => {\n            const storedUser = localStorage.getItem('user');\n            if (storedUser) {\n                setUser(JSON.parse(storedUser));\n            } else {\n                setUser(null);\n            }\n        };\n\n        // Roda a função uma vez quando o componente é montado\n        checkUser();\n\n        // Adiciona um \"ouvinte\" que recarrega os dados do usuário\n        // sempre que um evento 'userChanged' for disparado (no login/logout)\n        window.addEventListener('userChanged', checkUser);\n\n        // Função de \"limpeza\": remove o ouvinte para evitar problemas de memória\n        return () => {\n            window.removeEventListener('userChanged', checkUser);\n        };\n    }, []);\n\n    return user;\n}"],"mappings":"AAAA;AACA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAC9B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGJ,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAI,SAAS,CAAGA,CAAA,GAAM,CACpB,KAAM,CAAAC,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAIF,UAAU,CAAE,CACZF,OAAO,CAACK,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,CAAC,CACnC,CAAC,IAAM,CACHF,OAAO,CAAC,IAAI,CAAC,CACjB,CACJ,CAAC,CAED;AACAC,SAAS,CAAC,CAAC,CAEX;AACA;AACAM,MAAM,CAACC,gBAAgB,CAAC,aAAa,CAAEP,SAAS,CAAC,CAEjD;AACA,MAAO,IAAM,CACTM,MAAM,CAACE,mBAAmB,CAAC,aAAa,CAAER,SAAS,CAAC,CACxD,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAF,IAAI,CACf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}