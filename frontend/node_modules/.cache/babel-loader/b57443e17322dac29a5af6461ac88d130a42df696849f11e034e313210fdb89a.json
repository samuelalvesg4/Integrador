{"ast":null,"code":"import _objectSpread from\"C:/Users/Samuel Alves/Desktop/Integrador/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/src/services/api.js\nconst API=process.env.REACT_APP_API||'http://localhost:4000/api';export async function request(path){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=localStorage.getItem('token');const isFormData=options.body instanceof FormData;const headers=_objectSpread({},options.headers||{});if(!isFormData){headers['Content-Type']='application/json';}if(token){headers['Authorization']=\"Bearer \".concat(token);}const res=await fetch(\"\".concat(API).concat(path),_objectSpread(_objectSpread({},options),{},{headers}));const text=await res.text();let data;try{data=text?JSON.parse(text):null;}catch(_unused){data=text;}if(!res.ok){const errorBody=data||text;const err=new Error((errorBody===null||errorBody===void 0?void 0:errorBody.message)||(errorBody===null||errorBody===void 0?void 0:errorBody.error)||res.statusText||'Erro na requisição');err.status=res.status;err.body=errorBody;throw err;}return data;}export async function login(email,password){const res=await request('/login',{method:'POST',body:JSON.stringify({email,password})});return{token:res.token,user:res.user};}export async function register(name,email,password,role){return request('/register',{method:'POST',body:JSON.stringify({name,email,password,role})});}export async function registerProduct(productData){return request('/products',{method:'POST',body:JSON.stringify(productData)});}export async function uploadImages(files,productId){if(!localStorage.getItem('token')){throw new Error('Token não fornecido.');}const formData=new FormData();files.forEach(file=>{formData.append('images',file);});return request(\"/products/\".concat(productId,\"/images\"),{method:'POST',body:formData});}export async function editProduct(id,productData){return request(\"/products/\".concat(id),{method:'PUT',body:JSON.stringify(productData)});}export async function deleteProduct(id){return request(\"/products/\".concat(id),{method:'DELETE'});}export async function getSellerProducts(){return request('/my-products',{method:'GET'});}export async function getSellerSales(){return request('/sales',{method:'GET'});}export async function getProducts(){return request('/products');}export async function getProductById(id){return request(\"/products/\".concat(id));}export async function finalizarCompra(orderData){return request('/checkout',{method:'POST',body:JSON.stringify(orderData)});}// ADICIONADO: Funções para o dashboard do cliente\nexport async function getOrders(){return request('/orders/my-orders');}export async function cancelOrder(orderId){return request(\"/orders/\".concat(orderId,\"/cancel\"),{method:'PUT'});}","map":{"version":3,"names":["API","process","env","REACT_APP_API","request","path","options","arguments","length","undefined","token","localStorage","getItem","isFormData","body","FormData","headers","_objectSpread","concat","res","fetch","text","data","JSON","parse","_unused","ok","errorBody","err","Error","message","error","statusText","status","login","email","password","method","stringify","user","register","name","role","registerProduct","productData","uploadImages","files","productId","formData","forEach","file","append","editProduct","id","deleteProduct","getSellerProducts","getSellerSales","getProducts","getProductById","finalizarCompra","orderData","getOrders","cancelOrder","orderId"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\n\nconst API = process.env.REACT_APP_API || 'http://localhost:4000/api';\n\nexport async function request(path, options = {}) {\n  const token = localStorage.getItem('token');\n  \n  const isFormData = options.body instanceof FormData;\n  \n  const headers = { \n    ...(options.headers || {}) \n  };\n\n  if (!isFormData) {\n    headers['Content-Type'] = 'application/json';\n  }\n\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  const res = await fetch(`${API}${path}`, { ...options, headers });\n  \n  const text = await res.text();\n  let data;\n  try { \n    data = text ? JSON.parse(text) : null; \n  } catch { \n    data = text; \n  }\n\n  if (!res.ok) {\n    const errorBody = data || text;\n    const err = new Error(errorBody?.message || errorBody?.error || res.statusText || 'Erro na requisição');\n    err.status = res.status;\n    err.body = errorBody;\n    throw err;\n  }\n  return data;\n}\n\nexport async function login(email, password) {\n  const res = await request('/login', {\n    method: 'POST',\n    body: JSON.stringify({ email, password }),\n  });\n  \n  return {\n    token: res.token,\n    user: res.user,\n  };\n}\n\nexport async function register(name, email, password, role) {\n  return request('/register', {\n    method: 'POST',\n    body: JSON.stringify({ name, email, password, role }),\n  });\n}\n\nexport async function registerProduct(productData) {\n    return request('/products', {\n        method: 'POST',\n        body: JSON.stringify(productData),\n    });\n}\n\nexport async function uploadImages(files, productId) {\n    if (!localStorage.getItem('token')) {\n        throw new Error('Token não fornecido.');\n    }\n\n    const formData = new FormData();\n    files.forEach(file => {\n        formData.append('images', file);\n    });\n\n    return request(`/products/${productId}/images`, {\n        method: 'POST',\n        body: formData,\n    });\n}\n\nexport async function editProduct(id, productData) {\n    return request(`/products/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(productData),\n    });\n  }\n  \nexport async function deleteProduct(id) {\n    return request(`/products/${id}`, {\n      method: 'DELETE',\n      });\n  }\n\nexport async function getSellerProducts() {\n  return request('/my-products', {\n    method: 'GET',\n  });\n}\n\nexport async function getSellerSales() {\n  return request('/sales', {\n    method: 'GET',\n  });\n}\n\nexport async function getProducts() {\n  return request('/products');\n}\n\nexport async function getProductById(id) {\n  return request(`/products/${id}`);\n}\n\nexport async function finalizarCompra(orderData) {\n  return request('/checkout', {\n    method: 'POST',\n    body: JSON.stringify(orderData),\n  });\n}\n\n// ADICIONADO: Funções para o dashboard do cliente\nexport async function getOrders() {\n    return request('/orders/my-orders');\n}\n\nexport async function cancelOrder(orderId) {\n    return request(`/orders/${orderId}/cancel`, {\n        method: 'PUT',\n    });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}