{"ast":null,"code":"import{useEffect,useState}from\"react\";import Header from\"../components/Header\";import useAuth from\"../hooks/useAuth\";import{getSellerSales}from\"../services/api\";import'../components/my-products.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Sales(){useAuth({role:'seller'});const[sales,setSales]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchSales=async()=>{try{const data=await getSellerSales();setSales(data);}catch(err){var _err$body;console.error(\"Erro ao buscar vendas:\",err);alert((err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.message)||\"Erro de conexão com o servidor.\");}finally{setLoading(false);}};fetchSales();},[]);const formatPrice=priceCents=>{return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(priceCents/100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center mt-10 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"my-products-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6 text-gray-800\",children:\"Minhas Vendas\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Carregando vendas...\"}):sales.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Voc\\xEA ainda n\\xE3o realizou nenhuma venda.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"products-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"products-table-header\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Produto\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantidade\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pre\\xE7o Unit\\xE1rio\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pre\\xE7o Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Comprador\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Data\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sales.map(sale=>{var _sale$product,_sale$order,_sale$order$customer,_sale$order$customer$,_sale$order2,_sale$order3,_sale$order4;return/*#__PURE__*/_jsxs(\"tr\",{className:\"products-table-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:((_sale$product=sale.product)===null||_sale$product===void 0?void 0:_sale$product.name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:sale.quantity}),/*#__PURE__*/_jsx(\"td\",{children:formatPrice(sale.unitCents)}),/*#__PURE__*/_jsx(\"td\",{children:formatPrice(sale.unitCents*sale.quantity)}),/*#__PURE__*/_jsx(\"td\",{children:((_sale$order=sale.order)===null||_sale$order===void 0?void 0:(_sale$order$customer=_sale$order.customer)===null||_sale$order$customer===void 0?void 0:(_sale$order$customer$=_sale$order$customer.user)===null||_sale$order$customer$===void 0?void 0:_sale$order$customer$.name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:(_sale$order2=sale.order)!==null&&_sale$order2!==void 0&&_sale$order2.createdAt?new Date(sale.order.createdAt).toLocaleDateString():'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:((_sale$order3=sale.order)===null||_sale$order3===void 0?void 0:_sale$order3.status)==='CANCELLED'?'text-red-500':'text-green-500',children:((_sale$order4=sale.order)===null||_sale$order4===void 0?void 0:_sale$order4.status)==='CANCELLED'?'Cancelada':'Concluída'})]},sale.id);})})]})})]})})]});}","map":{"version":3,"names":["useEffect","useState","Header","useAuth","getSellerSales","jsx","_jsx","jsxs","_jsxs","Sales","role","sales","setSales","loading","setLoading","fetchSales","data","err","_err$body","console","error","alert","body","message","formatPrice","priceCents","Intl","NumberFormat","style","currency","format","className","children","length","map","sale","_sale$product","_sale$order","_sale$order$customer","_sale$order$customer$","_sale$order2","_sale$order3","_sale$order4","product","name","quantity","unitCents","order","customer","user","createdAt","Date","toLocaleDateString","status","id"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/pages/Sales.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Header from \"../components/Header\";\nimport useAuth from \"../hooks/useAuth\";\nimport { getSellerSales } from \"../services/api\";\nimport '../components/my-products.css';\n\nexport default function Sales() {\n    useAuth({ role: 'seller' });\n    const [sales, setSales] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchSales = async () => {\n            try {\n                const data = await getSellerSales();\n                setSales(data);\n            } catch (err) {\n                console.error(\"Erro ao buscar vendas:\", err);\n                alert(err?.body?.message || \"Erro de conexão com o servidor.\");\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchSales();\n    }, []);\n\n    const formatPrice = (priceCents) => {\n        return new Intl.NumberFormat('pt-BR', {\n            style: 'currency',\n            currency: 'BRL',\n        }).format(priceCents / 100);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-100\">\n            <Header />\n\n            <div className=\"w-full flex justify-center mt-10 px-4 sm:px-6 lg:px-8\">\n                <div className=\"my-products-wrapper\">\n                    <h2 className=\"text-3xl font-bold mb-6 text-gray-800\">Minhas Vendas</h2>\n\n                    {loading ? (\n                        <p className=\"text-center text-gray-600\">Carregando vendas...</p>\n                    ) : sales.length === 0 ? (\n                        <p className=\"text-center text-gray-600\">\n                            Você ainda não realizou nenhuma venda.\n                        </p>\n                    ) : (\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"products-table\">\n                                <thead className=\"products-table-header\">\n                                    <tr>\n                                        <th>Produto</th>\n                                        <th>Quantidade</th>\n                                        <th>Preço Unitário</th>\n                                        <th>Preço Total</th>\n                                        <th>Comprador</th>\n                                        <th>Data</th>\n                                        <th>Status</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {sales.map((sale) => (\n                                        <tr key={sale.id} className=\"products-table-row\">\n                                            {/* CORRIGIDO: Acessando os dados com verificação de segurança */}\n                                            <td>{sale.product?.name || 'N/A'}</td>\n                                            <td>{sale.quantity}</td>\n                                            <td>{formatPrice(sale.unitCents)}</td>\n                                            <td>{formatPrice(sale.unitCents * sale.quantity)}</td>\n                                            <td>{sale.order?.customer?.user?.name || 'N/A'}</td>\n                                            <td>{sale.order?.createdAt ? new Date(sale.order.createdAt).toLocaleDateString() : 'N/A'}</td>\n                                            <td className={sale.order?.status === 'CANCELLED' ? 'text-red-500' : 'text-green-500'}>\n                                                {sale.order?.status === 'CANCELLED' ? 'Cancelada' : 'Concluída'}\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}