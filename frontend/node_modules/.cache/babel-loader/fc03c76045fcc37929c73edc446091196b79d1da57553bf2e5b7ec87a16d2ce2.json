{"ast":null,"code":"import{useEffect,useState}from\"react\";import Header from\"../components/Header\";import{getSellerProducts,deleteProduct}from\"../services/api\";import useAuth from\"../hooks/useAuth\";import CreateProduct from\"./CreateProduct\";import'../components/my-products.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyProducts(){useAuth();const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[editingProduct,setEditingProduct]=useState(null);const fetchProducts=async()=>{try{const data=await getSellerProducts();setProducts(data);}catch(err){var _err$body;console.error(err);alert((err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.message)||\"Erro de conexão com o servidor.\");}finally{setLoading(false);}};useEffect(()=>{fetchProducts();},[]);const handleDelete=async productId=>{if(!window.confirm(\"Tem certeza que deseja deletar este produto?\"))return;try{await deleteProduct(productId);setProducts(prev=>prev.filter(p=>p.id!==productId));alert(\"Produto deletado com sucesso!\");}catch(err){var _err$body2;console.error(\"Erro ao deletar o produto:\",err);alert((err===null||err===void 0?void 0:(_err$body2=err.body)===null||_err$body2===void 0?void 0:_err$body2.error)||\"Ocorreu um erro ao tentar deletar o produto.\");}};const handleEdit=product=>{setEditingProduct(product);};const handleCloseModal=()=>{setEditingProduct(null);fetchProducts();};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center mt-10 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"my-products-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6 text-gray-800\",children:\"Painel do Vendedor\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Carregando...\"}):products.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Voc\\xEA ainda n\\xE3o cadastrou produtos.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"products-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"products-table-header\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pre\\xE7o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estoque\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(p=>/*#__PURE__*/_jsxs(\"tr\",{className:\"products-table-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",(p.priceCents/100).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:p.stock}),/*#__PURE__*/_jsxs(\"td\",{className:\"action-buttons-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(p),className:\"edit-button\",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(p.id),className:\"delete-button\",children:\"Deletar\"})]})]},p.id))})]})})]})}),editingProduct&&/*#__PURE__*/_jsx(Modal,{onClose:handleCloseModal,children:/*#__PURE__*/_jsx(CreateProduct,{productToEdit:editingProduct,onClose:handleCloseModal})})]});}const Modal=_ref=>{let{onClose,children}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 relative max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-2 right-4 text-gray-500 hover:text-gray-800 text-2xl\",onClick:onClose,children:\"\\xD7\"}),children]})});};","map":{"version":3,"names":["useEffect","useState","Header","getSellerProducts","deleteProduct","useAuth","CreateProduct","jsx","_jsx","jsxs","_jsxs","MyProducts","products","setProducts","loading","setLoading","editingProduct","setEditingProduct","fetchProducts","data","err","_err$body","console","error","alert","body","message","handleDelete","productId","window","confirm","prev","filter","p","id","_err$body2","handleEdit","product","handleCloseModal","className","children","length","map","name","priceCents","toFixed","stock","onClick","Modal","onClose","productToEdit","_ref"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/pages/MyProducts.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Header from \"../components/Header\";\nimport { getSellerProducts, deleteProduct } from \"../services/api\";\nimport useAuth from \"../hooks/useAuth\";\nimport CreateProduct from \"./CreateProduct\";\nimport '../components/my-products.css';\n\nexport default function MyProducts() {\n  useAuth();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingProduct, setEditingProduct] = useState(null);\n  \n  const fetchProducts = async () => {\n    try {\n      const data = await getSellerProducts();\n      setProducts(data);\n    } catch (err) {\n      console.error(err);\n      alert(err?.body?.message || \"Erro de conexão com o servidor.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  const handleDelete = async (productId) => {\n    if (!window.confirm(\"Tem certeza que deseja deletar este produto?\")) return;\n    try {\n      await deleteProduct(productId);\n      setProducts((prev) => prev.filter((p) => p.id !== productId));\n      alert(\"Produto deletado com sucesso!\");\n    } catch (err) {\n      console.error(\"Erro ao deletar o produto:\", err);\n      alert(err?.body?.error || \"Ocorreu um erro ao tentar deletar o produto.\");\n    }\n  };\n  \n  const handleEdit = (product) => {\n    setEditingProduct(product);\n  };\n\n  const handleCloseModal = () => {\n    setEditingProduct(null);\n    fetchProducts();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Header />\n\n      <div className=\"w-full flex justify-center mt-10 px-4 sm:px-6 lg:px-8\">\n        {/* Usando a nova classe CSS */}\n        <div className=\"my-products-wrapper\">\n          {/* Título */}\n          <h2 className=\"text-3xl font-bold mb-6 text-gray-800\">Painel do Vendedor</h2>\n\n          {loading ? (\n            <p className=\"text-center text-gray-600\">Carregando...</p>\n          ) : products.length === 0 ? (\n            <p className=\"text-center text-gray-600\">\n              Você ainda não cadastrou produtos.\n            </p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              {/* Usando as novas classes CSS */}\n              <table className=\"products-table\">\n                <thead className=\"products-table-header\">\n                  <tr>\n                    <th>Nome</th>\n                    <th>Preço</th>\n                    <th>Estoque</th>\n                    <th className=\"text-center\">Ações</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {products.map((p) => (\n                    <tr key={p.id} className=\"products-table-row\">\n                      <td>{p.name}</td>\n                      <td>R$ {(p.priceCents / 100).toFixed(2)}</td>\n                      <td>{p.stock}</td>\n                      <td className=\"action-buttons-container\">\n                        <button\n                          onClick={() => handleEdit(p)}\n                          className=\"edit-button\"\n                        >\n                          Editar\n                        </button>\n                        <button\n                          onClick={() => handleDelete(p.id)}\n                          className=\"delete-button\"\n                        >\n                          Deletar\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {editingProduct && (\n        <Modal onClose={handleCloseModal}>\n          <CreateProduct productToEdit={editingProduct} onClose={handleCloseModal} />\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nconst Modal = ({ onClose, children }) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-8 relative max-h-[90vh] overflow-y-auto\">\n        <button\n          className=\"absolute top-2 right-4 text-gray-500 hover:text-gray-800 text-2xl\"\n          onClick={onClose}\n        >\n          &times;\n        </button>\n        {children}\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}