{"ast":null,"code":"// Exemplo de ProtectedRoute.jsx\nimport{useEffect,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children,role}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[hasChecked,setHasChecked]=useState(false);useEffect(()=>{const token=localStorage.getItem(\"token\");const userString=localStorage.getItem(\"user\");if(!token||!userString){setIsAuthenticated(false);}else{const user=JSON.parse(userString);if(role&&user.role!==role){setIsAuthenticated(false);}else{setIsAuthenticated(true);}}setHasChecked(true);},[role]);if(!hasChecked){return null;// ou um spinner de carregamento\n}if(isAuthenticated){return children;}else{// Redireciona com base na verificação final\nconst user=JSON.parse(localStorage.getItem(\"user\"));if(user&&role&&user.role!==role){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}}","map":{"version":3,"names":["useEffect","useState","Navigate","jsx","_jsx","ProtectedRoute","_ref","children","role","isAuthenticated","setIsAuthenticated","hasChecked","setHasChecked","token","localStorage","getItem","userString","user","JSON","parse","to","replace"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["// Exemplo de ProtectedRoute.jsx\nimport { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\nexport default function ProtectedRoute({ children, role }) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [hasChecked, setHasChecked] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const userString = localStorage.getItem(\"user\");\n\n    if (!token || !userString) {\n      setIsAuthenticated(false);\n    } else {\n      const user = JSON.parse(userString);\n      if (role && user.role !== role) {\n        setIsAuthenticated(false);\n      } else {\n        setIsAuthenticated(true);\n      }\n    }\n    setHasChecked(true);\n  }, [role]);\n\n  if (!hasChecked) {\n    return null; // ou um spinner de carregamento\n  }\n\n  if (isAuthenticated) {\n    return children;\n  } else {\n    // Redireciona com base na verificação final\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user && role && user.role !== role) {\n      return <Navigate to=\"/\" replace />;\n    }\n    return <Navigate to=\"/login\" replace />;\n  }\n}"],"mappings":"AAAA;AACA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAqB,IAApB,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CAAAF,IAAA,CACvD,KAAM,CAACG,eAAe,CAAEC,kBAAkB,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAEnDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,UAAU,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAE/C,GAAI,CAACF,KAAK,EAAI,CAACG,UAAU,CAAE,CACzBN,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,IAAM,CACL,KAAM,CAAAO,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACH,UAAU,CAAC,CACnC,GAAIR,IAAI,EAAIS,IAAI,CAACT,IAAI,GAAKA,IAAI,CAAE,CAC9BE,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,IAAM,CACLA,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CACF,CACAE,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAAE,CAACJ,IAAI,CAAC,CAAC,CAEV,GAAI,CAACG,UAAU,CAAE,CACf,MAAO,KAAI,CAAE;AACf,CAEA,GAAIF,eAAe,CAAE,CACnB,MAAO,CAAAF,QAAQ,CACjB,CAAC,IAAM,CACL;AACA,KAAM,CAAAU,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACL,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrD,GAAIE,IAAI,EAAIT,IAAI,EAAIS,IAAI,CAACT,IAAI,GAAKA,IAAI,CAAE,CACtC,mBAAOJ,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CACA,mBAAOjB,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}