{"ast":null,"code":"// frontend/src/pages/CustomerDashboard.jsx\nimport React,{useState,useEffect}from'react';import Header from'../components/Header';import{useNavigate}from'react-router-dom';import useAuth from'../hooks/useAuth';import{getOrders,cancelOrder}from'../services/api';// Não precisamos importar o CSS externo mais\n// import '../pages/MyProducts.css';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CustomerDashboard(){useAuth({role:'customer'});const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const dashboardStyles=\"\\n        .customer-dashboard-wrapper {\\n            max-width: 1000px;\\n            margin: 2rem auto;\\n            padding: 1rem;\\n            background-color: #f8f9fa;\\n            border-radius: 8px;\\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n        }\\n        .text-red-500 {\\n            color: #ef4444;\\n        }\\n        .text-green-500 {\\n            color: #22c55e;\\n        }\\n        .bg-red-500 {\\n            background-color: #ef4444;\\n        }\\n        .hover:bg-red-600:hover {\\n            background-color: #dc2626;\\n        }\\n    \";const fetchOrders=async()=>{try{const data=await getOrders();setOrders(data);}catch(err){var _err$body;console.error(\"Erro ao buscar pedidos:\",err);alert((err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.message)||\"Erro ao buscar seus pedidos.\");}finally{setLoading(false);}};useEffect(()=>{fetchOrders();},[]);const handleCancelOrder=async orderId=>{if(!window.confirm(\"Tem certeza que deseja cancelar este pedido?\")){return;}try{await cancelOrder(orderId);alert(\"Pedido cancelado com sucesso!\");fetchOrders();}catch(err){var _err$body2;console.error(\"Erro ao cancelar pedido:\",err);alert((err===null||err===void 0?void 0:(_err$body2=err.body)===null||_err$body2===void 0?void 0:_err$body2.error)||\"Ocorreu um erro ao tentar cancelar o pedido.\");}};const formatPrice=priceCents=>{return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(priceCents/100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex justify-center mt-10 px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"style\",{children:dashboardStyles}),/*#__PURE__*/_jsxs(\"div\",{className:\"customer-dashboard-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6 text-gray-800\",children:\"Meus Pedidos\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Carregando pedidos...\"}):orders.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Voc\\xEA n\\xE3o tem pedidos.\"}):orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold\",children:[\"Pedido #\",order.id]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(order.status==='CANCELLED'?'text-red-500':'text-green-500'),children:order.status==='CANCELLED'?'Cancelado':'Concluído'})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"mb-4\",children:order.items.map(item=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between text-sm text-gray-700\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.product.name,\" (x\",item.quantity,\")\"]}),/*#__PURE__*/_jsx(\"span\",{children:formatPrice(item.unitCents)})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"Total: \",formatPrice(order.totalCents)]}),order.status==='PLACED'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelOrder(order.id),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"Cancelar Pedido\"})]})]},order.id))]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Header","useNavigate","useAuth","getOrders","cancelOrder","jsx","_jsx","jsxs","_jsxs","CustomerDashboard","role","orders","setOrders","loading","setLoading","dashboardStyles","fetchOrders","data","err","_err$body","console","error","alert","body","message","handleCancelOrder","orderId","window","confirm","_err$body2","formatPrice","priceCents","Intl","NumberFormat","style","currency","format","className","children","length","map","order","id","concat","status","items","item","product","name","quantity","unitCents","totalCents","onClick"],"sources":["C:/Users/Samuel Alves/Desktop/Integrador/frontend/src/pages/CustomerDashboard.jsx"],"sourcesContent":["// frontend/src/pages/CustomerDashboard.jsx\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Header from '../components/Header';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport useAuth from '../hooks/useAuth';\r\nimport { getOrders, cancelOrder } from '../services/api';\r\n// Não precisamos importar o CSS externo mais\r\n// import '../pages/MyProducts.css';\r\n\r\nexport default function CustomerDashboard() {\r\n    useAuth({ role: 'customer' });\r\n    const [orders, setOrders] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const dashboardStyles = `\r\n        .customer-dashboard-wrapper {\r\n            max-width: 1000px;\r\n            margin: 2rem auto;\r\n            padding: 1rem;\r\n            background-color: #f8f9fa;\r\n            border-radius: 8px;\r\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .text-red-500 {\r\n            color: #ef4444;\r\n        }\r\n        .text-green-500 {\r\n            color: #22c55e;\r\n        }\r\n        .bg-red-500 {\r\n            background-color: #ef4444;\r\n        }\r\n        .hover\\:bg-red-600:hover {\r\n            background-color: #dc2626;\r\n        }\r\n    `;\r\n\r\n    const fetchOrders = async () => {\r\n        try {\r\n            const data = await getOrders();\r\n            setOrders(data);\r\n        } catch (err) {\r\n            console.error(\"Erro ao buscar pedidos:\", err);\r\n            alert(err?.body?.message || \"Erro ao buscar seus pedidos.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchOrders();\r\n    }, []);\r\n\r\n    const handleCancelOrder = async (orderId) => {\r\n        if (!window.confirm(\"Tem certeza que deseja cancelar este pedido?\")) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await cancelOrder(orderId);\r\n            alert(\"Pedido cancelado com sucesso!\");\r\n            fetchOrders();\r\n        } catch (err) {\r\n            console.error(\"Erro ao cancelar pedido:\", err);\r\n            alert(err?.body?.error || \"Ocorreu um erro ao tentar cancelar o pedido.\");\r\n        }\r\n    };\r\n\r\n    const formatPrice = (priceCents) => {\r\n        return new Intl.NumberFormat('pt-BR', {\r\n            style: 'currency',\r\n            currency: 'BRL',\r\n        }).format(priceCents / 100);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100\">\r\n            <Header />\r\n            <div className=\"w-full flex justify-center mt-10 px-4 sm:px-6 lg:px-8\">\r\n                {/* Estilo CSS inserido aqui */}\r\n                <style>{dashboardStyles}</style>\r\n                <div className=\"customer-dashboard-wrapper\">\r\n                    <h2 className=\"text-3xl font-bold mb-6 text-gray-800\">Meus Pedidos</h2>\r\n                    {loading ? (\r\n                        <p className=\"text-center text-gray-600\">Carregando pedidos...</p>\r\n                    ) : orders.length === 0 ? (\r\n                        <p className=\"text-center text-gray-600\">Você não tem pedidos.</p>\r\n                    ) : (\r\n                        orders.map(order => (\r\n                            <div key={order.id} className=\"bg-white rounded-lg shadow p-4 mb-4\">\r\n                                <div className=\"flex justify-between items-center mb-2\">\r\n                                    <h3 className=\"text-lg font-bold\">Pedido #{order.id}</h3>\r\n                                    <span className={`text-sm font-semibold ${order.status === 'CANCELLED' ? 'text-red-500' : 'text-green-500'}`}>\r\n                                        {order.status === 'CANCELLED' ? 'Cancelado' : 'Concluído'}\r\n                                    </span>\r\n                                </div>\r\n                                <ul className=\"mb-4\">\r\n                                    {order.items.map(item => (\r\n                                        <li key={item.id} className=\"flex justify-between text-sm text-gray-700\">\r\n                                            <span>{item.product.name} (x{item.quantity})</span>\r\n                                            <span>{formatPrice(item.unitCents)}</span>\r\n                                        </li>\r\n                                    ))}\r\n                                </ul>\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"font-bold\">Total: {formatPrice(order.totalCents)}</span>\r\n                                    {order.status === 'PLACED' && (\r\n                                        <button \r\n                                            onClick={() => handleCancelOrder(order.id)}\r\n                                            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n                                        >\r\n                                            Cancelar Pedido\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}